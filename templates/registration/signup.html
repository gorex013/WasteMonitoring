<script>
    function submitSignup() {
        $('#signupForm').submit(function (e) {

            e.preventDefault();

            const form = $(this);
            const url = form.attr('action');

            $.ajax({
                type: 'POST',
                url: url,
                data: form.serialize(),
                success: function (data) {
                    $('#signupForm').parent().html(data);
                }
            });
        }).submit();
    }

</script>
<form id="signupForm" class="col-12 my-auto" method="post" action="{% url 'signup' %}">
    {% csrf_token %}
    <div class="form-group mb-3">
        <div class="input-group">
            <input name="first_name" type="text" class="form-control" id="firstName"
                   aria-describedby="emailHelp"
                   placeholder="Nume" required/>
        </div>
    </div>
    <div class="form-group mb-3">
        <div class="input-group">
            <input name="last_name" type="text" class="form-control" id="lastName"
                   aria-describedby="emailHelp"
                   placeholder="Prenume" required/>
        </div>
    </div>
    <div class="form-group mb-3">
        <div class="input-group">
            <span class="input-group-text mt-0 bi bi-person-fill"></span>
            <input name="username" type="email" class="form-control"
                   placeholder="Email" required/>
        </div>
        {% if form.username.errors %}
            <div class="alert alert-danger mt-2">
                {% for error in form.username.errors %}
                    <strong>{{ error }}</strong>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="form-group mb-3">
        <div class="input-group">
            <span class="input-group-text bi bi-lock-fill" id="basic-addon1"></span>
            <script>
                function passwords_are_same() {
                    let passIn1 = $('#passwordInput1');
                    let passIn2 = $('#passwordInput2');
                    let password2icon = $('#basic-addon2');
                    if (passIn1.val() === passIn2.val()) {
                        password2icon.removeClass('text-danger').addClass('text-success');
                    } else if (!password2icon.hasClass('text-danger')) {
                        password2icon.addClass('text-danger');
                    }
                }
            </script>
            <input name="password1" type="password" class="form-control flex-fill" id="passwordInput1"
                   placeholder="Parola" required/>
            <button type="button" class="btn btn-warning"
                    style=":focus {outline: none;  box-shadow: none;}"
                    onclick="this.blur(); show_hide_password($('#passwordInput1'),$('#show-icon1'),$('#hide-icon1'));">
                <span id="show-icon1" class="bi bi-eye"></span>
                <span class="bi bi-eye-slash" id="hide-icon1" style="display: none;"></span>
            </button>

        </div>
        {% if form.password.errors %}
            <div class="alert alert-danger mt-2">
                {% for error in form.password.errors %}
                    <strong>{{ error }}</strong>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="form-group mb-3">
        <div class="input-group">
            <span class="input-group-text bi bi-lock-fill" id="basic-addon2"></span>
            <input name="password2" type="password" class="form-control" id="passwordInput2"
                   placeholder="Confirmare parolei" required onkeyup="passwords_are_same();"/>
            <button type="button" class="btn btn-warning"
                    style=":focus {outline: none;  box-shadow: none;}"
                    onclick="this.blur(); show_hide_password($('#passwordInput2'),$('#show-icon2'),$('#hide-icon2'));">
                <span id="show-icon2" class="bi bi-eye"></span>
                <span id="hide-icon2" style="display: none;" class="bi bi-eye-slash"></span>
            </button>
        </div>
    </div>
</form>